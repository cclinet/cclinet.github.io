---
import { getRelativeLocaleUrl } from "astro:i18n";
import FormattedDate from "./FormattedDate.astro";
import type { CollectionEntry } from "astro:content";
interface Props {
  posts: CollectionEntry<"blog">[];
}

const { posts } = Astro.props;
const locale = Astro.currentLocale!;
---

<div class="grid grid-cols-1 gap-4 md:grid-cols-2 lg:ml-10 lg:grid-cols-3">
  {
    posts.map((post, index) => {
      // Bento Grid 逻辑：第一篇文章作为“头条”占据更大版面
      // 您后续可以根据 post.data.tags?.includes('tech') 来动态调整 spanClass
      const isFeatured = index === 0;
      const spanClass = isFeatured
        ? "md:col-span-2 md:row-span-2"
        : "col-span-1";

      return (
        <article
          class:list={[
            "group relative flex flex-col justify-between overflow-hidden rounded-xl border border-gray-200 bg-white p-6 transition-all hover:shadow-lg dark:border-gray-700 dark:bg-gray-800",
            spanClass,
          ]}
        >
          <a
            href={getRelativeLocaleUrl(locale, `/posts/${post.id}/`)}
            class="absolute inset-0 z-10"
          >
            <span class="sr-only">View {post.data.title}</span>
          </a>
          <div class="mb-4">
            <h3 class="text-xl leading-tight font-bold text-gray-900 group-hover:text-blue-600 dark:text-gray-100 dark:group-hover:text-blue-400">
              {post.data.title}
            </h3>
          </div>
          <div class="mt-auto flex items-center justify-between text-sm text-gray-500 dark:text-gray-400">
            <FormattedDate date={post.data.pubDate} />
          </div>
        </article>
      );
    })
  }
</div>
